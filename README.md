# 使用Python进行视频监控检测

## 背景
- 背景：当前对接海康监控视频较多，每次都需要人为的方式去巡查
- 技术应用场景：使用脚本去代替人为查看监控视频的是否可用
- 整体思路：从配置中读取视频地址，检查视频每5顿的三维数组进行比对，将比对的结果统计后发送到企微

### 如何使用Python编写程序，实现对视频监控的自动化检测和报警
- 使用OpencV库读取视频，并检查视频是否可以正常播放
- 从JSON文件中提取hlsUrl字段，并使用多线程检查所有视频链接的可用性，如果发现视频出现异常，则使用企微信器人发送报警信息
### 准备工作
  - 我们需要准备以下文件
    - 监控视频配置文件：存储着监控视频的各种配置信息，如视频链接、工厂名称等
    - 企微机器人信息：对接着企微机器人的配置信息，如机器人的Webhook地址等

#### 读取视频并检查
- 首先，让我们来编写一个函数，使用OpencV库读取视频，并检查视频是否可以正常播放。在这个函数中，我们首先使用OpencV库的Videocapture类读取视频，然后再逐检查视频是可以正常播放。最后，我们使用cap.releaseC）释放视频并关闭窗口。
- 多线程检查编写一个函数，从JSON文件中提取“hlsUrl”字段，并使用多线程检查所有视频链接的可用性。
- 发送企业微信消息，编写一个函数，如果发现视频出现异常，则使用企业微信机器人发送报警信息。

- 在这个函数中，我们首先使用企业微信机器人的Webhook地址和JSON格式的数据，发送报警信息。
- 如果发送成功，则输出“发送企微消息成功”，否则输出“发送企微消息失败”

#### 定时任务调度
- 使用Python的schedule库来实现定时任务调度。例如，以下代码可以每天定时执行视频检查和发送报警信息在这个代码中，我们使用了schedule.every（）.day.at（9:06”）.do（send_job）来设置定
时任务调度。具体来说，它的含义是“每天09:06执行send_job函数”。最后，我们使用schedule.run_pending（）和time.sleep（3）来不断地检查定时任务是否需要执行

### 最后
通过使用Python编写程序，实现对视频监控的自动化检测和报警。不仅可以提高视频监控的效率，还可以减轻相关工作人员的工作负担，提高工作效率。
